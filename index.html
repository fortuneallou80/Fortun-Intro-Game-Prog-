<!DOCTYPE html>
<html>
    <head>
        <title>Pong</title>
        <style>
            body {
                margin: 0;
                overflow: hidden;
            }
        </style>
    </head>

    <body>
        <canvas id = "canv"></canvas>
        <script>
            let canvas = document.querySelector("#canv")
            let ctx = canvas.getContext("2d")

            let keysDown = []
            document.addEventListener("KeyDown", keyDown)
            document.addEventListener("keyUp", keyDown)

            if(!0){
                console.log("falsey")
            }

            function keyDown(e){
                // console.log(e)
                keysDown[e.key] = true
                if (e.key == "ArrowLeft"){
                    console.log("Down Left")
                }

                if (e.key == "ArrowRight"){
                    console.log("Down Right")
                }
            }

            function KeyUp(e){
                // console.log(e)
                keysDown[e.key] = false
                if (e.key == "ArrowLeft"){
                    console.log("Up Left")
                }

                if (e.key == "ArrowRight"){
                    console.log("Up Right")
                }
            }
            // ctx.fillRect(20, 50, 100, 150)

            let margin = 20
            let size = 100
            let pongX = margin + size / 2
            let pongY = margin + size / 2

            //Velocities
            let pongVX = 4
            let pongVY = 2

            // Model of MVC
            function update(){

                // console.log(keysDown)
                // Gives ball movement 
                pongX += pongVX
                pongY += pongVY

                // Keeps ball within rectangle margin
                if(pongX > margin + size){
                    pongVX *= -1
                }

                if(pongY > margin + size){
                    pongVY *= -1
                }

                if(pongX < margin){
                    pongVX *= -1
                }
                
                if(pongY < margin){
                    pongVY *= -1
                }
            }

            // View part of MVC
            function draw(){

                // Expands the canvas to full screen
                canvas.width = window.innerWidth
                canvas.height = window.innerHeight

                // Creates yellow canvas
                ctx.fillStyle = "yellow"
                ctx.fillRect(0, 0, canvas.width, canvas.height)

                // Creates rectangle zone
                ctx.strokeStyle = "black"
                ctx.beginPath()
                ctx.moveTo(margin, margin)
                ctx.lineTo(margin + size, margin)
                ctx.lineTo(margin + size, margin + size)
                ctx.lineTo(margin, margin + size)
                ctx.lineTo(margin, margin)
                ctx.stroke()

                // Creates the ball + color
                ctx.fillStyle = "blue"
                ctx.beginPath()
                ctx.arc(pongX, pongY, 5, 0, Math.PI * 2)
                ctx.fill()
            }

            // Loop the game
            function gameLoop(){
                update()
                draw()
            }

            // How fast the ball is moving
            setInterval(gameLoop, 1000 / 25)
           
        </script>
    </body>

</html>